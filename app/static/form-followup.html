<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario B: Reporte de Seguimiento - Maxocracia</title>
    <link rel="stylesheet" href="/static/css/vhv.css">
    <link rel="stylesheet" href="/static/css/forms.css">
</head>

<body>
    <div class="dashboard-main">
        <div class="forms-container">
            <!-- Hero Section -->
            <div class="forms-hero">
                <h1 class="forms-hero-title">üìä Reporte de Seguimiento</h1>
                <p class="forms-hero-subtitle">
                    Registro de evoluci√≥n, nuevas necesidades y efectividad de los intercambios.
                </p>
            </div>

            <!-- Success Message -->
            <div id="successMessage" class="forms-success" style="display: none;">
                <div class="forms-success-icon">‚úÖ</div>
                <h2 class="forms-success-title">¬°Seguimiento Registrado!</h2>
                <p class="forms-success-message" id="successDetails"></p>
                <button class="forms-btn forms-btn-primary" onclick="resetForm()" style="margin-top: 1rem;">
                    Registrar Otro Seguimiento
                </button>
            </div>

            <!-- Error Message -->
            <div id="errorMessage" class="forms-error" style="display: none;">
                <span class="forms-error-icon">‚ö†Ô∏è</span>
                <span id="errorText"></span>
            </div>

            <!-- Form -->
            <form id="followupForm" class="forms-card">
                <!-- SECCI√ìN 1: Identificaci√≥n -->
                <div class="forms-section">
                    <h2 class="forms-section-title">
                        <span class="forms-emoji">üîñ</span>
                        SECCI√ìN 1: Identificaci√≥n
                    </h2>

                    <div class="forms-group">
                        <label class="forms-label forms-label-required" for="follow_up_date">Fecha del
                            Seguimiento</label>
                        <input type="date" id="follow_up_date" name="follow_up_date" class="forms-input" required>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label forms-label-required" for="participant_name">Nombre del
                            Participante</label>
                        <input type="text" id="participant_name" name="participant_name" class="forms-input"
                            placeholder="Buscar participante..." required>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label" for="related_interchange">Intercambio Relacionado (ID)</label>
                        <input type="text" id="related_interchange" name="related_interchange_id" class="forms-input"
                            placeholder="Opcional">
                    </div>

                    <div class="forms-group">
                        <label class="forms-label forms-label-required">Tipo de Seguimiento</label>
                        <div class="forms-radio-group">
                            <div class="forms-radio-item">
                                <input type="radio" id="type_routine" name="follow_up_type" value="Rutina" required>
                                <label for="type_routine">üîÑ Rutina</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="type_urgent" name="follow_up_type" value="Urgente">
                                <label for="type_urgent">üö® Urgente</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="type_closure" name="follow_up_type" value="Cierre">
                                <label for="type_closure">üèÅ Cierre de Caso</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECCI√ìN 2: Estado Actual -->
                <div class="forms-section">
                    <h2 class="forms-section-title">
                        <span class="forms-emoji">üìä</span>
                        SECCI√ìN 2: Estado Actual
                    </h2>

                    <div class="forms-group">
                        <label class="forms-label forms-label-required" for="current_situation">Situaci√≥n Actual del
                            Participante</label>
                        <textarea id="current_situation" name="current_situation" class="forms-textarea"
                            placeholder="¬øC√≥mo est√° la persona hoy?" required></textarea>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label forms-label-required">Nivel de Necesidad Actual</label>
                        <div class="forms-radio-group">
                            <div class="forms-radio-item">
                                <input type="radio" id="need_1" name="need_level" value="1" required>
                                <label for="need_1">1 - Estable</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="need_2" name="need_level" value="2">
                                <label for="need_2">2 - Leve</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="need_3" name="need_level" value="3">
                                <label for="need_3">3 - Moderada</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="need_4" name="need_level" value="4">
                                <label for="need_4">4 - Alta</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="need_5" name="need_level" value="5">
                                <label for="need_5">5 - Cr√≠tica</label>
                            </div>
                        </div>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label forms-label-required">Cambio desde el √∫ltimo contacto</label>
                        <div class="forms-radio-group">
                            <div class="forms-radio-item">
                                <input type="radio" id="change_better" name="situation_change" value="Mejor√≥" required>
                                <label for="change_better">üìà Mejor√≥</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="change_same" name="situation_change" value="Igual">
                                <label for="change_same">‚ûñ Igual</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="change_worse" name="situation_change" value="Empeor√≥">
                                <label for="change_worse">üìâ Empeor√≥</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECCI√ìN 3: Intercambios Activos -->
                <div class="forms-section">
                    <h2 class="forms-section-title">
                        <span class="forms-emoji">ü§ù</span>
                        SECCI√ìN 3: Intercambios Activos
                    </h2>

                    <div class="forms-group">
                        <label class="forms-label forms-label-required">Estado de Intercambios en curso</label>
                        <div class="forms-radio-group">
                            <div class="forms-radio-item">
                                <input type="radio" id="status_none" name="active_interchanges_status" value="none"
                                    required>
                                <label for="status_none">Ninguno activo</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="status_ok" name="active_interchanges_status" value="fluyendo">
                                <label for="status_ok">Fluyendo bien</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="status_stuck" name="active_interchanges_status"
                                    value="estancado">
                                <label for="status_stuck">Estancado / Problemas</label>
                            </div>
                        </div>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label">Cosas que est√°n funcionando bien</label>
                        <div class="forms-checkbox-group">
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="well_comm" name="interchanges_working_well"
                                    value="comunicacion">
                                <label for="well_comm">Comunicaci√≥n</label>
                            </div>
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="well_time" name="interchanges_working_well" value="tiempos">
                                <label for="well_time">Tiempos de entrega</label>
                            </div>
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="well_quality" name="interchanges_working_well"
                                    value="calidad">
                                <label for="well_quality">Calidad de la ayuda</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECCI√ìN 4: Nuevos Hallazgos -->
                <div class="forms-section">
                    <h2 class="forms-section-title">
                        <span class="forms-emoji">üîç</span>
                        SECCI√ìN 4: Nuevos Hallazgos
                    </h2>

                    <div class="forms-group">
                        <label class="forms-label">Nuevas Necesidades Detectadas</label>
                        <div class="forms-checkbox-group">
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="need_new_food" name="new_needs_detected"
                                    value="alimentacion">
                                <label for="need_new_food">Alimentaci√≥n</label>
                            </div>
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="need_new_health" name="new_needs_detected" value="salud">
                                <label for="need_new_health">Salud / Bienestar</label>
                            </div>
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="need_new_tools" name="new_needs_detected"
                                    value="herramientas">
                                <label for="need_new_tools">Herramientas / Objetos</label>
                            </div>
                        </div>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label">Nuevas Ofertas / Talentos Detectados</label>
                        <textarea id="new_offers" name="new_offers_detected" class="forms-textarea"
                            placeholder="¬øAlgo nuevo que pueda ofrecer?"></textarea>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label">Estado Emocional Observado</label>
                        <div class="forms-radio-group">
                            <div class="forms-radio-item">
                                <input type="radio" id="emo_pos" name="emotional_state" value="positivo">
                                <label for="emo_pos">üòä Positivo</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="emo_neu" name="emotional_state" value="neutral">
                                <label for="emo_neu">üòê Neutral</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="emo_neg" name="emotional_state" value="negativo">
                                <label for="emo_neg">üòî Negativo / Estresado</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECCI√ìN 5: Acciones y Cierre -->
                <div class="forms-section">
                    <h2 class="forms-section-title">
                        <span class="forms-emoji">üéØ</span>
                        SECCI√ìN 5: Acciones y Cierre
                    </h2>

                    <div class="forms-group">
                        <label class="forms-label">Acciones Requeridas</label>
                        <div class="forms-checkbox-group">
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="act_new_match" name="actions_required" value="nuevo_match">
                                <label for="act_new_match">Buscar nuevo match</label>
                            </div>
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="act_mediate" name="actions_required" value="mediacion">
                                <label for="act_mediate">Mediaci√≥n en conflicto</label>
                            </div>
                            <div class="forms-checkbox-item">
                                <input type="checkbox" id="act_resource" name="actions_required"
                                    value="gestionar_recurso">
                                <label for="act_resource">Gestionar recurso externo</label>
                            </div>
                        </div>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label forms-label-required">Prioridad de Pr√≥ximo Seguimiento</label>
                        <div class="forms-radio-group">
                            <div class="forms-radio-item">
                                <input type="radio" id="p_high" name="follow_up_priority" value="high" required>
                                <label for="p_high">üî¥ Alta (Inmediata)</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="p_medium" name="follow_up_priority" value="medium">
                                <label for="p_medium">üü° Media (Pr√≥xima semana)</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="p_low" name="follow_up_priority" value="low">
                                <label for="p_low">üü¢ Baja (Pr√≥ximo mes)</label>
                            </div>
                            <div class="forms-radio-item">
                                <input type="radio" id="p_closed" name="follow_up_priority" value="closed">
                                <label for="p_closed">‚úÖ Cerrado</label>
                            </div>
                        </div>
                    </div>

                    <div class="forms-group">
                        <label class="forms-label" for="next_follow_up_date">Fecha Programada Siguiente contacto</label>
                        <input type="date" id="next_follow_up_date" name="next_follow_up_date" class="forms-input">
                    </div>

                    <div class="forms-group">
                        <label class="forms-label" for="learnings">Lecciones aprendidas o Notas del facilitador</label>
                        <textarea id="learnings" name="learnings" class="forms-textarea"></textarea>
                    </div>
                </div>

                <!-- Hidden Submit (Handled by Wizard) -->
                <button type="submit" id="submitBtn" style="display:none">Registrar Seguimiento</button>
            </form>
        </div>
    </div>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/ui-shell.js"></script>
    <script src="/static/js/ui-wizard.js"></script>
    <script src="/static/js/forms.js"></script>
    <script src="/static/js/form-followup.js"></script>
</body>

</html>